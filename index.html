<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript">

			var c,ctx;
			var cwidth = 1000;
			var cheight = 1000;
			function init(){

				c = document.getElementById('main-screen');
				ctx = c.getContext('2d');

			}

			var stage = function(){

				this.actors = [];


				this.addActor = function(actorGet){
					//this.actors.push(actorGet);
					this.actors[actorGet.name] = actorGet;
				}

				this.render = function(cback){
					var thisHere = this;
					var t =setInterval(function(){

						//clear all drawings to free memory
						ctx.clearRect(0,0,cwidth,cheight);
						
						for(var x in thisHere.actors){
							ctx.drawImage(thisHere.actors[x].sprite.resource,thisHere.actors[x].sprite.srcx,thisHere.actors[x].sprite.srcy,thisHere.actors[x].sprite.w,thisHere.actors[x].sprite.h,thisHere.actors[x].sprite.destx,thisHere.actors[x].sprite.desty,thisHere.actors[x].w,thisHere.actors[x].h);
						}
						
						cback();
					},2000);
					
				}

			}


			var actor = function(){

				this.x = 0;
				this.y = 0;
				this.h =  100;
				this.w = 100;
				this.sprite = '';
				this.name = '';
				this.init = function(config){
					for (var x in config){
						this[x] = config[x];
					}
				}




			}

			var sprite = function(){
				this.resource = '';
				this.srcx = 0;
				this.srcy = 0;
				this.h = 100;
				this.w = 100;
				this.destx = 0;
				this.desty = 0;

				this.init = function(config){
					
					for(var x in config){
						this[x] = config[x];
					}


				}
			}

			window.addEventListener('load',function(){
				
				//initialize important components
				init();

				//extends sprite
				var chimneySprite = new sprite();
				chimneySprite.init({
					resource: document.getElementById('chimney'),
					srcx: 0,
					srcy: 0
				});


				//extends actor
				var chimneyActor = new actor();
				chimneyActor.init({
					sprite: chimneySprite,
					x: 0,
					y: 0,
					h: 100,
					w: 100,
					name: 'chimney'
				});

				var st = new stage();
				st.addActor(chimneyActor);



				
				st.render(function(){

				});
				





			});


		</script>
	</head>
	<body>
		<img id="chimney" src="images/chimney.jpg" height=100 width=100 style="display:none;" />
		<canvas style="border:1px solid black;" id="main-screen" height=1000 width=1000>
		</canvas>
	</body>
</html>